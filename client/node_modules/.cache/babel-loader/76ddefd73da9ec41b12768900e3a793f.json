{"ast":null,"code":"import _slicedToArray from\"C:/Users/OM V. PATEL/Desktop/for Deployment/granthalaya/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import{Link,useHistory}from\"react-router-dom\";import M from\"materialize-css\";import Logo from\"../assets/logo2.jpg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignIn=function SignIn(_ref){var user=_ref.user,setUser=_ref.setUser;var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),password=_useState2[0],setPasword=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var PostData=function PostData(){if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){M.toast({html:\"invalid email\",classes:\"#c62828 red darken-3\"});return;}fetch(\"\".concat(window.location.origin,\"/signin\"),{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({password:password,email:email})}).then(function(res){return res.json();}).then(function(data){// console.log(data);\nif(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{localStorage.setItem(\"jwt\",data.token);localStorage.setItem(\"user\",JSON.stringify(data.user));// console.log(data.user);\nM.toast({html:\"signedin success\",classes:\"#43a047 green darken-1\"});history.push(\"/\");setUser(data.user);}}).catch(function(err){// console.log(err);\n});};return/*#__PURE__*/_jsx(\"div\",{className:\"mycard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card auth-card input-field\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"logo\",src:Logo,alt:\"E-Book-Sale\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"User Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){return setPasword(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return PostData();},children:\"Login\"}),/*#__PURE__*/_jsx(\"h5\",{children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Don't have an account ?\"})})]})});};export default SignIn;","map":{"version":3,"names":["React","useState","useContext","Link","useHistory","M","Logo","SignIn","user","setUser","history","password","setPasword","email","setEmail","PostData","test","toast","html","classes","fetch","window","location","origin","method","headers","body","JSON","stringify","then","res","json","data","error","localStorage","setItem","token","push","catch","err","e","target","value"],"sources":["C:/Users/OM V. PATEL/Desktop/for Deployment/granthalaya/client/src/components/SignIn.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport M from \"materialize-css\";\nimport Logo from \"../assets/logo2.jpg\";\n\nconst SignIn = ({ user, setUser }) => {\n  const history = useHistory();\n  const [password, setPasword] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const PostData = () => {\n    if (\n      !/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(\n        email\n      )\n    ) {\n      M.toast({ html: \"invalid email\", classes: \"#c62828 red darken-3\" });\n      return;\n    }\n    fetch(`${window.location.origin}/signin`, {\n      method: \"post\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        password,\n        email,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        // console.log(data);\n        if (data.error) {\n          M.toast({ html: data.error, classes: \"#c62828 red darken-3\" });\n        } else {\n          localStorage.setItem(\"jwt\", data.token);\n          localStorage.setItem(\"user\", JSON.stringify(data.user));\n          // console.log(data.user);\n          M.toast({\n            html: \"signedin success\",\n            classes: \"#43a047 green darken-1\",\n          });\n          history.push(\"/\");\n          setUser(data.user);\n        }\n      })\n      .catch((err) => {\n        // console.log(err);\n      });\n  };\n  return (\n    <div className=\"mycard\">\n      <div className=\"card auth-card input-field\">\n        <img className=\"logo\" src={Logo} alt=\"E-Book-Sale\" />\n        <h4>User Login</h4>\n        <input\n          type=\"text\"\n          placeholder=\"email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <input\n          type=\"password\"\n          placeholder=\"password\"\n          value={password}\n          onChange={(e) => setPasword(e.target.value)}\n        />\n        <button\n          className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n          onClick={() => PostData()}\n        >\n          Login\n        </button>\n        <h5>\n          <Link to=\"/signup\">Don't have an account ?</Link>\n        </h5>\n      </div>\n    </div>\n  );\n};\n\nexport default SignIn;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}