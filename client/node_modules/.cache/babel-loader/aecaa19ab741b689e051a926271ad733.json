{"ast":null,"code":"import _toConsumableArray from\"C:/Users/OM V. PATEL/Desktop/for Deployment/granthalaya/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/OM V. PATEL/Desktop/for Deployment/granthalaya/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./App.css\";import{BrowserRouter,Route,Switch,useHistory}from\"react-router-dom\";import Home from\"./components/Home\";import Cart from\"./components/Cart\";import NavBar from\"./components/Navbar\";import React,{useState,useEffect,useContext}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";import SignUp from\"./components/SignUp\";import SignIn from\"./components/SignIn\";import M from\"materialize-css\";import SignUpSeller from\"./components/SignUpSeller\";import SignInSeller from\"./components/SignInSeller\";import Order from\"./components/Order\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),seller=_useState8[0],setseller=_useState8[1];var history=useHistory();useEffect(function(){if(localStorage.getItem(\"cart\")){var currentCart=JSON.parse(localStorage.getItem(\"cart\"));setCart(currentCart);}if(localStorage.getItem(\"user\")){var currUser=JSON.parse(localStorage.getItem(\"user\"));setUser(currUser);}if(localStorage.getItem(\"seller\")){var currseller=JSON.parse(localStorage.getItem(\"seller\"));setUser(currseller);}},[]);useEffect(function(){localStorage.setItem(\"cart\",JSON.stringify(cart));},[cart]);useEffect(function(){axios.get(\"\".concat(window.location.origin,\"/allbooks\")).then(function(response){// console.log(response.data.books);\nsetData(response.data.books);}).catch(function(error){console.log(error);}).then(function(){// console.log(data);\n});},[]);var addToCart=function addToCart(id){var Obj=data.filter(function(item){return item._id==id;});// console.log(Obj[0]);\nif(cart.indexOf(Obj[0])!=-1){incrementCount(id);}else{var cartItems=data.filter(function(item){return item._id==id;});cartItems.map(function(item){setCart([].concat(_toConsumableArray(cart),[item]));});}M.toast({html:\"Successfully Added in Cart\",classes:\"#43a047 green darken-1\"});};var removeBook=function removeBook(id){var newState=cart.filter(function(item){return item._id!=id;});// should turn the count of the remove item to 0\nvar newObj=data.filter(function(item){return item._id==id;});var index=data.indexOf(newObj[0]);var newData=data.filter(function(item){return item._id!=id;});newObj[0].count=1;newData.splice(index,0,newObj[0]);setData(newData);setCart(newState);};var incrementCount=function incrementCount(id){var newObj=cart.filter(function(item){return item._id==id;});var index=cart.indexOf(newObj[0]);var newState=cart.filter(function(item){return item._id!=id;});newObj[0].count+=1;newState.splice(index,0,newObj[0]);setCart(newState);};var decrementCount=function decrementCount(id){var newObj=cart.filter(function(item){return item._id==id;});var index=cart.indexOf(newObj[0]);var newState=cart.filter(function(item){return item._id!=id;});newObj[0].count-=1;if(newObj[0].count==0){removeBook(id);return;}newState.splice(index,0,newObj[0]);setCart(newState);};var setOriginalData=function setOriginalData(){data.map(function(item){removeBook(item._id);});// console.log(data);\nsetCart([]);};return/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsx(NavBar,{data:data,addToCart:addToCart,user:user,setUser:setUser,seller:seller,setseller:setseller}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:/*#__PURE__*/_jsx(Home,{data:data,addToCart:addToCart})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,removeBook:removeBook,incrementCount:incrementCount,decrementCount:decrementCount,setCart:setCart,setOriginalData:setOriginalData})}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(SignIn,{user:user,setUser:setUser})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signinseller\",children:/*#__PURE__*/_jsx(SignInSeller,{seller:seller,setseller:setseller})}),/*#__PURE__*/_jsx(Route,{path:\"/signupseller\",children:/*#__PURE__*/_jsx(SignUpSeller,{})}),/*#__PURE__*/_jsx(Route,{path:\"/order\",children:/*#__PURE__*/_jsx(Order,{})})]})]});}export default App;","map":{"version":3,"names":["BrowserRouter","Route","Switch","useHistory","Home","Cart","NavBar","React","useState","useEffect","useContext","Link","axios","SignUp","SignIn","M","SignUpSeller","SignInSeller","Order","App","data","setData","cart","setCart","user","setUser","seller","setseller","history","localStorage","getItem","currentCart","JSON","parse","currUser","currseller","setItem","stringify","get","window","location","origin","then","response","books","catch","error","console","log","addToCart","id","Obj","filter","item","_id","indexOf","incrementCount","cartItems","map","toast","html","classes","removeBook","newState","newObj","index","newData","count","splice","decrementCount","setOriginalData"],"sources":["C:/Users/OM V. PATEL/Desktop/for Deployment/granthalaya/client/src/App.js"],"sourcesContent":["import \"./App.css\";\nimport { BrowserRouter, Route, Switch, useHistory } from \"react-router-dom\";\nimport Home from \"./components/Home\";\nimport Cart from \"./components/Cart\";\nimport NavBar from \"./components/Navbar\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\nimport SignUp from \"./components/SignUp\";\nimport SignIn from \"./components/SignIn\";\nimport M from \"materialize-css\";\nimport SignUpSeller from \"./components/SignUpSeller\";\nimport SignInSeller from \"./components/SignInSeller\";\nimport Order from \"./components/Order\";\n\nfunction App() {\n  const [data, setData] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [user, setUser] = useState(\"\");\n  const [seller, setseller] = useState(\"\");\n  const history = useHistory();\n\n  useEffect(() => {\n    if (localStorage.getItem(\"cart\")) {\n      const currentCart = JSON.parse(localStorage.getItem(\"cart\"));\n      setCart(currentCart);\n    }\n    if (localStorage.getItem(\"user\")) {\n      const currUser = JSON.parse(localStorage.getItem(\"user\"));\n      setUser(currUser);\n    }\n    if (localStorage.getItem(\"seller\")) {\n      const currseller = JSON.parse(localStorage.getItem(\"seller\"));\n      setUser(currseller);\n    }\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n  }, [cart]);\n\n  useEffect(() => {\n    axios\n      .get(`${window.location.origin}/allbooks`)\n      .then(function (response) {\n        // console.log(response.data.books);\n        setData(response.data.books);\n      })\n      .catch(function (error) {\n        console.log(error);\n      })\n      .then(function () {\n        // console.log(data);\n      });\n  }, []);\n\n  const addToCart = (id) => {\n    let Obj = data.filter((item) => {\n      return item._id == id;\n    });\n    // console.log(Obj[0]);\n    if (cart.indexOf(Obj[0]) != -1) {\n      incrementCount(id);\n    } else {\n      const cartItems = data.filter((item) => {\n        return item._id == id;\n      });\n\n      cartItems.map((item) => {\n        setCart([...cart, item]);\n      });\n    }\n    M.toast({\n      html: \"Successfully Added in Cart\",\n      classes: \"#43a047 green darken-1\",\n    });\n  };\n\n  const removeBook = (id) => {\n    const newState = cart.filter((item) => {\n      return item._id != id;\n    });\n\n    // should turn the count of the remove item to 0\n    let newObj = data.filter((item) => {\n      return item._id == id;\n    });\n\n    let index = data.indexOf(newObj[0]);\n\n    let newData = data.filter((item) => {\n      return item._id != id;\n    });\n    newObj[0].count = 1;\n\n    newData.splice(index, 0, newObj[0]);\n\n    setData(newData);\n\n    setCart(newState);\n  };\n\n  const incrementCount = (id) => {\n    let newObj = cart.filter((item) => {\n      return item._id == id;\n    });\n\n    let index = cart.indexOf(newObj[0]);\n\n    let newState = cart.filter((item) => {\n      return item._id != id;\n    });\n    newObj[0].count += 1;\n\n    newState.splice(index, 0, newObj[0]);\n\n    setCart(newState);\n  };\n\n  const decrementCount = (id) => {\n    let newObj = cart.filter((item) => {\n      return item._id == id;\n    });\n\n    let index = cart.indexOf(newObj[0]);\n\n    let newState = cart.filter((item) => {\n      return item._id != id;\n    });\n    newObj[0].count -= 1;\n\n    if (newObj[0].count == 0) {\n      removeBook(id);\n      return;\n    }\n\n    newState.splice(index, 0, newObj[0]);\n\n    setCart(newState);\n  };\n\n  const setOriginalData = () => {\n    data.map((item) => {\n      removeBook(item._id);\n    });\n    // console.log(data);\n    setCart([]);\n  };\n\n  return (\n    <BrowserRouter>\n      <NavBar\n        data={data}\n        addToCart={addToCart}\n        user={user}\n        setUser={setUser}\n        seller={seller}\n        setseller={setseller}\n      />\n      <Switch>\n        <Route exact path=\"/\">\n          <Home data={data} addToCart={addToCart} />\n        </Route>\n        <Route  path=\"/cart\">\n          <Cart\n            cart={cart}\n            removeBook={removeBook}\n            incrementCount={incrementCount}\n            decrementCount={decrementCount}\n            setCart={setCart}\n            setOriginalData={setOriginalData}\n          />\n        </Route>\n        <Route  path=\"/signin\">\n          <SignIn user={user} setUser={setUser} />\n        </Route>\n        <Route  path=\"/signup\">\n          <SignUp />\n        </Route>\n        <Route  path=\"/signinseller\">\n          <SignInSeller seller={seller} setseller={setseller} />\n        </Route>\n        <Route  path=\"/signupseller\">\n          <SignUpSeller />\n        </Route>\n        <Route  path=\"/order\">\n          <Order />\n        </Route>\n      </Switch>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}